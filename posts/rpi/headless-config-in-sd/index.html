<!doctype html><html lang=ko><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>SD카드에서 라즈베리파이 headless 설정하기 - JSYoo5B.Dev();</title><meta name=Description content="Blog of JaeSang Yoo, the programmer."><meta property="og:title" content="SD카드에서 라즈베리파이 headless 설정하기"><meta property="og:description" content="라즈베리파이 OS를 설치한 microSD카드를 꽂고 전원을 연결하면 바로 라즈베리파이 OS가 부팅된다. 하지만 해당 장치를 사용하려면 HDMI로 모니터에 연"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.jsyoo5b.dev/posts/rpi/headless-config-in-sd/"><meta property="article:published_time" content="2020-11-05T19:40:21+09:00"><meta property="article:modified_time" content="2020-11-05T19:40:21+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SD카드에서 라즈베리파이 headless 설정하기"><meta name=twitter:description content="라즈베리파이 OS를 설치한 microSD카드를 꽂고 전원을 연결하면 바로 라즈베리파이 OS가 부팅된다. 하지만 해당 장치를 사용하려면 HDMI로 모니터에 연"><meta name=application-name content="JSYoo5B.Dev();"><meta name=apple-mobile-web-app-title content="JSYoo5B.Dev();"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.jsyoo5b.dev/posts/rpi/headless-config-in-sd/><link rel=prev href=https://blog.jsyoo5b.dev/posts/rpi/flash-rpi-os-into-sd/><link rel=next href=https://blog.jsyoo5b.dev/posts/review/book-joel-on-software/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"SD카드에서 라즈베리파이 headless 설정하기","inLanguage":"ko","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.jsyoo5b.dev\/posts\/rpi\/headless-config-in-sd\/"},"genre":"posts","keywords":"리눅스, 네트워크, headless, wpa_supplicant","wordcount":3233,"url":"https:\/\/blog.jsyoo5b.dev\/posts\/rpi\/headless-config-in-sd\/","datePublished":"2020-11-05T19:40:21+09:00","dateModified":"2020-11-05T19:40:21+09:00","publisher":{"@type":"Organization","name":"유재상"},"author":{"@type":"Person","name":"유재상"},"description":""}</script></head><body header-desktop header-mobile><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('dark'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'dark'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=JSYoo5B.Dev();>JSYoo5B.Dev();</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/about/>소개 </a><a class=menu-item href=/posts/>블로그 </a><a class=menu-item href=/categories/>카테고리 </a><a class=menu-item href=/tags/>태그 </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item language" title="언어 변경">한국어<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select id=language-select-desktop onchange="location=this.value;"><option value=/posts/rpi/headless-config-in-sd/ selected>한국어</option></select>
</a><a href=javascript:void(0); class="menu-item theme-switch" title="테마 변경"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=JSYoo5B.Dev();>JSYoo5B.Dev();</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/about/>소개</a><a class=menu-item href=/posts/>블로그</a><a class=menu-item href=/categories/>카테고리</a><a class=menu-item href=/tags/>태그</a><a href=javascript:void(0); class="menu-item theme-switch" title="테마 변경">
<i class="fas fa-adjust fa-fw"></i></a><a href=javascript:void(0); class=menu-item title="언어 변경">한국어<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select onchange="location=this.value;"><option value=/posts/rpi/headless-config-in-sd/ selected>한국어</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>목차</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">SD카드에서 라즈베리파이 headless 설정하기</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>유재상</a></span>&nbsp;<span class=post-category>분류: <a href=/categories/%EA%B0%9C%EB%B0%9C/><i class="far fa-folder fa-fw"></i>개발</a>&nbsp;<a href=/categories/%EB%9D%BC%EC%A6%88%EB%B2%A0%EB%A6%AC%ED%8C%8C%EC%9D%B4/><i class="far fa-folder fa-fw"></i>라즈베리파이</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-11-05>2020-11-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;3233 단어&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;읽는데 약 7분&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>목차</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#라즈베리파이와-연결-가능한-환경-확보하기>라즈베리파이와 연결 가능한 환경 확보하기</a><ul><li><a href=#wifi-자동-접속-설정하기>WiFi 자동 접속 설정하기</a></li><li><a href=#라즈베리파이-제로를-usb-이더넷-장치로-사용할-수-있게-설정하기>라즈베리파이 제로를 USB 이더넷 장치로 사용할 수 있게 설정하기</a></li><li><a href=#라즈베리파이에게-dhcp로-ip를-할당해-줄-수-없을-때>라즈베리파이에게 DHCP로 IP를 할당해 줄 수 없을 때</a></li></ul></li><li><a href=#ssh-원격-접속-설정하기>SSH 원격 접속 설정하기</a></li><li><a href=#vnc-원격-접속-설정하기>VNC 원격 접속 설정하기</a></li><li><a href=#참고-링크>참고 링크</a></li></ul></nav></div></div><div class=content id=content><p>라즈베리파이 OS를 설치한 microSD카드를 꽂고 전원을 연결하면 바로 라즈베리파이 OS가 부팅된다. 하지만 해당 장치를 사용하려면 HDMI로 모니터에 연결하고 (혹은 <a href=https://en.wikipedia.org/wiki/Display_Serial_Interface target=_blank rel="noopener noreffer">DSI 커넥터</a>에 디스플레이 모듈 연결) 키보드, 마우스를 연결해야 한다. <a href=https://en.wikipedia.org/wiki/Headless_computer target=_blank rel="noopener noreffer">Headless 방식</a>은 위 장치들이 없이 네트워크 혹은 시리얼 케이블로 연결하는 환경을 말한다. (보통 위 3가지 장치를 묶어서 <a href=https://ko.wikipedia.org/wiki/KVM_%EC%8A%A4%EC%9C%84%EC%B9%98 target=_blank rel="noopener noreffer">KVM 스위치</a> 등으로 여러 컴퓨터를 동시 제어할 때 쓰기도 한다.)</p><p>본 문서에서는 라즈베리파이를 처음부터 Headless로 사용하기 위해 필요한 설정 방법을 설명할 것이다. 순서는 아래와 같다.</p><ol><li>네트워크/<a href=https://ko.wikipedia.org/wiki/%EC%A7%81%EB%A0%AC_%ED%8F%AC%ED%8A%B8 target=_blank rel="noopener noreffer">시리얼 포트</a>로 라즈베리파이와 연결 가능한 환경 확보</li><li>SSH 원격 접속을 설정하여 CLI로 접속 가능하게 하기</li><li><a href=https://ko.wikipedia.org/wiki/VNC target=_blank rel="noopener noreffer">VNC</a> 원격 접속을 설정하여 GUI로 접속 가능하게 하기</li></ol><p>본 문서에서는 처음부터 headless로 사용하기 위해 라즈베리파이 OS가 설치된 microSD의 내용을 변경하는 방법을 설명한다. 라즈베리파이 OS가 설치된 microSD카드는 FAT32로 포맷된 boot 파티션과 ext4로 포멧된 rootfs 파티션이 있을 것이다. 본 문서에서는 boot파티션의 내용 수정을 주로 설명할 것이다.</p><h2 id=라즈베리파이와-연결-가능한-환경-확보하기>라즈베리파이와 연결 가능한 환경 확보하기</h2><h3 id=wifi-자동-접속-설정하기>WiFi 자동 접속 설정하기</h3><p>라즈베리파이를 유선랜으로 연결할 수 있다면 가장 좋겠지만, 불가능한 경우 WiFi에 자동 접속하도록 설정해주자. 라즈베리파이는 <a href=https://linux.die.net/man/8/wpa_supplicant target=_blank rel="noopener noreffer">wpa_supplicant</a>를 사용하므로 해당 설정 파일을 미리 작성해서 넣으면 된다.</p><p>boot 파티션에 wpa_supplicant.conf 파일을 생성하고 WiFi 연결 정보를 작성한다. 아래는 WiFi AP 이름이 &ldquo;testing&rdquo;, 비밀번호가 &ldquo;testingPassword"일 때의 작성 예시다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
<span style=display:block;width:100%;background-color:#3c3d38>country=GB
</span>
<span style=display:block;width:100%;background-color:#3c3d38>network={
</span><span style=display:block;width:100%;background-color:#3c3d38>    ssid=&#34;testing&#34;
</span><span style=display:block;width:100%;background-color:#3c3d38>    psk=&#34;testingPassword&#34;
</span><span style=display:block;width:100%;background-color:#3c3d38>}
</span></code></pre></div><p><strong>country=</strong> 부분에는 현재 WiFi의 국가를 설정하는 부분인데, 한국이라서 <strong>KR</strong>로 입력하면 WiFi 사용에 문제가 있는 경우가 있으므로, 일단은 <strong>GB</strong> 혹은 <strong>US</strong>로 설정해 주도록 하자. (<a href=https://community.cypress.com/thread/57471 target=_blank rel="noopener noreffer">링크</a>를 보면 알겠지만, 한국에서 WiFi 사용을 위한 주파수 밴드가 대부분 비활성화 되어 있어 생기는 문제다.)</p><h4 id=비밀번호-없는-wifi-접속-설정>비밀번호 없는 WiFi 접속 설정</h4><p><strong>network={ }</strong> 안에 비밀번호 대신 <strong>key_mgmt=NONE</strong>를 입력하면 된다. 아래는 비밀번호 없는 WiFi AP 이름이 &ldquo;testing"일 때의 작성 예시다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>network={
    ssid=&#34;testing&#34;
<span style=display:block;width:100%;background-color:#3c3d38>    key_mgmt=NONE
</span>}
</code></pre></div><h4 id=숨겨진-wifi-접속-설정>숨겨진 WiFi 접속 설정</h4><p><strong>network={ }</strong> 안에 <strong>scan_ssid=1</strong>을 추가하면 된다. 아래는 숨겨진 WiFi AP 이름이 &ldquo;hiddenSSID&rdquo;, 비밀번호가 &ldquo;testingPassword"일 때의 작성 예시다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>network={
    ssid=&#34;hiddenSSID&#34;
<span style=display:block;width:100%;background-color:#3c3d38>    scan_ssid=1
</span>    psk=&#34;testingPassword&#34;
}
</code></pre></div><h4 id=2개-이상의-wifi-접속-설정>2개 이상의 WiFi 접속 설정</h4><p>각 WiFi AP에 대한 **network={ }**를 여러 개 입력하면 된다. 각 WiFi AP간 우선순위는 **priority=**으로 표기한다. 아래는 WiFi AP 이름이 &ldquo;firstSSID&rdquo;, 비밀번호가 &ldquo;firstPassword"이고 다른 WiFi AP의 이름이 &ldquo;secondSSID&rdquo;, 비밀번호가 &ldquo;secondPassword"이며, &ldquo;firstSSID"를 우선적으로 접속하고 싶을 때의 작성 예시이다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>network={
    ssid=&#34;firstSSID&#34;
    psk=&#34;firstPassword&#34;
<span style=display:block;width:100%;background-color:#3c3d38>    priority=1
</span>}

network={
    ssid=&#34;secondSSID&#34;
    psk=&#34;secondPassword&#34;
<span style=display:block;width:100%;background-color:#3c3d38>    priority=2
</span>}
</code></pre></div><h4 id=wifi-비밀번호-암호화하기>WiFi 비밀번호 암호화하기</h4><p>이전까지의 설정은 모두 비밀번호가 평문으로 저장된다는 문제점이 있다. 비밀번호를 노출하고 싶지 않다면, <a href=https://en.wikipedia.org/wiki/Wi-Fi_Protected_Access#Target_users_%28authentication_key_distribution%29 target=_blank rel="noopener noreffer">미리 암호화된 비밀번호</a>로 변환하여 저장하는 방법이 있다. (해당 방법은 wpa_supplicant를 직접 사용해야하며, 윈도우즈에서는 일반적으로 설치하기 힘든 것으로 보인다.)</p><blockquote><p>$ wpa_passphrase $SSID $PASSPHRASE</p></blockquote><p>wpa_supplicant를 설치하면 <a href=https://linux.die.net/man/8/wpa_passphrase target=_blank rel="noopener noreffer">wpa_passphrase</a> 명령어도 같이 설치되는데, 위와 같이 명령어의 인자로 WiFi AP의 이름과 비밀번호를 입력하면 사용해야 할 <strong>network={ }</strong> 내용을 생성해준다. 원문 비밀번호는 앞에 #으로 주석처리되어 있는데, 평문을 노출하지 않고 저장하는 것이 목적이므로 해당 줄만 삭제하면 된다. 아래는 WiFi AP 이름이 &ldquo;testing&rdquo;, 비밀번호가 &ldquo;testingPassword"일 때 평문을 감추는 예시다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:block;width:100%;background-color:#3c3d38>$ wpa_passphrase testing testingPassword
</span>network={
        ssid=&#34;testing&#34;
<span style=display:block;width:100%;background-color:#3c3d38>        #psk=&#34;testingPassword&#34;
</span>        psk=131e1e221f6e06e3911a2d11ff2fac9182665c004de85300f9cac208a6a80531
}
</code></pre></div><p>wpa_supplicant를 직접 사용할 수 없는 경우에는 <a href=https://www.wireshark.org/tools/wpa-psk.html target=_blank rel="noopener noreffer">Wireshark에서 제공하는 변환 페이지</a>를 사용할 수도 있다.</p><h3 id=라즈베리파이-제로를-usb-이더넷-장치로-사용할-수-있게-설정하기>라즈베리파이 제로를 USB 이더넷 장치로 사용할 수 있게 설정하기</h3><p><a href=https://www.raspberrypi.org/products/raspberry-pi-zero/ target=_blank rel="noopener noreffer">라즈베리파이 제로</a>의 경우 WiFi가 지원되지 않는다. 하지만 해당 제품에서 USB 연결 설정을 변경하여 <a href=https://en.wikipedia.org/wiki/Ethernet_over_USB target=_blank rel="noopener noreffer">PC에서 USB 이더넷 장치</a>로 인식하게 하는 방법이 있다. <a href=http://raspberrypiwiki.com/Raspberry_Pi_Zero_W_USB-A_Addon_Board target=_blank rel="noopener noreffer">Addon board</a>나 <a href=https://www.iunikerpi.com/products/iuniker-usb-dongle-expansion-breakout-module-kit-for-raspberry-pi-zero-w-both-front-amp-back-side-can-be-inserted-p0039 target=_blank rel="noopener noreffer">dongle expansion breakout module kit</a>을 사용한다면 PC에서 라즈베리파이를 마치 이더넷 어댑터에 연결한 것 처럼 사용할 수 있다. 이 방법은 <a href=https://www.raspberrypi.org/products/raspberry-pi-zero-w/ target=_blank rel="noopener noreffer">라즈베리파이 제로 W</a>도 적용 가능하다.</p><p>boot 파티션의 <a href=https://www.raspberrypi.org/documentation/configuration/cmdline-txt.md target=_blank rel="noopener noreffer">cmdline.txt</a> 파일을 아래와 같이 수정한다.</p><blockquote><p>console=serial0,115200 console=tty1 root=PARTUUID=384c22b9-02 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait <strong>modules-load=dwc2,g_ether</strong> splash plymouth.ignore-serial-consoles</p></blockquote><p>해당 파일은 1줄짜리로 되어있는데, 내용 중 <strong>rootwait</strong> 부분과 <strong>quit</strong> 사이에 <strong>modules_load=dwc2,g_ether</strong>를 추가해준다.</p><p>또한 <a href=https://www.raspberrypi.org/documentation/configuration/config-txt/README.md target=_blank rel="noopener noreffer">config.txt</a> 파일에 <strong>dtoverlay=dwc2</strong>를 추가한다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span></span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text># Uncomment this to enable infrared communication.
#dtoverlay=gpio-ir,gpio_pin=17
#dtoverlay=gpio-ir-tx,gpio_pin=18

# Additional overlays and parameters are documented /boot/overlays/README
<span style=display:block;width:100%;background-color:#3c3d38>dtoverlay=dwc2
</span>
# Enable audio (loads snd_bcm2835)
dtparam=audio=on
</code></pre></td></tr></table></div></div><p>라즈베리 파이 제로의 USB controller인 <a href=https://github.com/raspberrypi/firmware/blob/94c59c45/boot/overlays/README#L728-L736 target=_blank rel="noopener noreffer">DesignWare Core2의 OTG 설정을 활성화</a>해주고, USB OTG 모듈 중 <a href=http://trac.gateworks.com/wiki/linux/OTG#g_ether target=_blank rel="noopener noreffer">g_ether 모듈</a>을 사용하게 하는 것이다.</p><p>윈도우즈에서는 이렇게 설정한 라즈베리파이를 연결하면 <a href=https://en.wikipedia.org/wiki/RNDIS target=_blank rel="noopener noreffer">RNDIS</a> 장치로 인식하게 되는데, <a href=https://social.msdn.microsoft.com/Forums/azure/en-US/c5b1b3c5-7ac6-4ae9-ae68-dd69c14dc7d8/any-plan-for-windows-10-to-fix-the-problem-of-rndis target=_blank rel="noopener noreffer">해당 장치 연결 시 컴퓨터가 느려지는 문제</a>가 있다.</p><h3 id=라즈베리파이에게-dhcp로-ip를-할당해-줄-수-없을-때>라즈베리파이에게 DHCP로 IP를 할당해 줄 수 없을 때</h3><p>라즈베리파이 제로를 USB로 연결하거나, 공유기 등에서 DHCP 기능을 사용하지 않는 경우 라즈베리파이는 IP를 할당받지 못하게 된다. 고정IP 설정은 boot 파티션 수정으로 할 수 없기 때문에 rootfs 파티션 내부를 수정하거나, <a href=https://en.wikipedia.org/wiki/Link-local_address target=_blank rel="noopener noreffer">링크 로컬 주소</a>를 사용해야 한다. 위에서 말한대로 rootfs는 ext4로 포멧되어있으니 윈도우즈만 사용하는 경우에는 고정IP 설정은 바로 할 수 없다고 생각하면 된다.</p><h4 id=rootfs에서-고정-ip-설정하기>rootfs에서 고정 IP 설정하기</h4><p>rootfs의 /etc/dhcpcd.conf 파일 끝에 아래와 같이 수정한다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>interface $IF_NAME
static ip_address=$DEV_IP_ADDR/$PREFIX_BITS
static routers=$GATEWAY_IP_ADDR
static domain_name_servers=$DNS_IP_ADDR
</code></pre></div><ul><li>$IF_NAME은 사용할 네트워크 장치의 이름을 입력한다. (유선랜: eth0, WiFi: wlan0)</li><li>$DEV_IP_ADDR는 라즈베리파이가 사용할 주소를, $PREFIX_BITS는 서브넷 마스크의 비트 수를 입력하면 된다.</li><li>$GATEWAY_IP_ADDR는 공유기의 주소를 입력한다.</li><li>$DNS_IP_ADDR는 DNS의 주소를 입력한다. (대부분 공유기가 DNS요청을 대신 처리해주기 때문에 공유기의 주소를 입력해도 된다.)</li></ul><p>유선랜과 WiFi의 설정을 같이 입력해도 된다. 아래는 유선랜이 172.16.1.101, WiFi가 172.16.2.101로 잡히도록 설정한 예시이다. (공유기는 172.16.0.1로 가정)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>interface eth0
static ip_address=172.16.1.101/16
static routers=172.16.0.1
static domain_name_servers=172.16.0.1

interface wlan0
static ip_address=172.16.2.101/16
static routers=172.16.0.1
static domain_name_servers=172.16.0.1
</code></pre></div><h2 id=ssh-원격-접속-설정하기>SSH 원격 접속 설정하기</h2><p>boot 파티션 안에 ssh 혹은 ssh.txt 파일만 생성하면 된다. 해당 파일의 내용은 관계없다. (빈 파일도 상관없다.)</p><p>리눅스의 경우 touch 명령어를 사용하여 생성할 수 있다.</p><blockquote><p># touch $RPI_BOOT/ssh</p></blockquote><h2 id=vnc-원격-접속-설정하기>VNC 원격 접속 설정하기</h2><p>VNC 서버 설정은 boot 파티션 수정으로 할 수 없다. 원칙적으로 VNC 원격 접속 설정은 라즈베리파이를 부팅하고 나서, <a href=https://www.raspberrypi.org/documentation/configuration/raspi-config.md target=_blank rel="noopener noreffer">raspi-config</a>를 사용하여 Interfacing option에서 VNC 서버 사용 여부를 수정해야한다. 하지만 해당 <a href=https://github.com/RPi-Distro/raspi-config/blob/99a8ba5/raspi-config#L829-L832 target=_blank rel="noopener noreffer">명령어의 코드를 보면</a> <a href=https://www.freedesktop.org/software/systemd/man/systemctl.html target=_blank rel="noopener noreffer">systemctl</a>을 이용하여 VNC 서비스 데몬을 <a href=https://www.freedesktop.org/software/systemd/man/systemctl.html#enable%20UNIT%E2%80%A6 target=_blank rel="noopener noreffer">enable</a>시키는 것을 확인할 수 있다. systemctl enable의 역할은 미리 작성된 서비스 데몬의 파일을 자동 실행되도록 <a href=https://ko.wikipedia.org/wiki/%EC%8B%AC%EB%B3%BC%EB%A6%AD_%EB%A7%81%ED%81%AC target=_blank rel="noopener noreffer">심볼릭 링크</a>를 달아주는 것이므로 rootfs에서 미리 수정할 수 있다. 위에서 말한대로 rootfs는 ext4로 포멧되어있으니 윈도우즈만 사용하는 경우에는 VNC 원격 접속 설정은 바로 할 수 없다고 생각하면 된다.</p><blockquote><p># ln -s -f /usr/lib/systemd/system/vncserver-x11-serviced.service $RPI_ROOTFS/etc/systemd/system/multi-user.target.wants/vncserver-x11-serviced.service</p></blockquote><p><a href=https://ko.wikipedia.org/wiki/Chroot target=_blank rel="noopener noreffer">chroot</a>를 통해 미리 라즈베리파이 OS의 rootfs 위에서 작업하거나, 혹은 mount된 경로를 고려하여 심볼릭 링크를 생성해주면 된다.</p><ul><li>원본 VNC 서비스 데몬 스크립트 위치: /usr/lib/systemd/system/vncserver-x11-serviced.service</li><li>연결할 자동 실행 위치: /etc/systemd/system/multi-user.target.wants/</li></ul><p>원본 VNC 서비스 데몬 스크립트의 경로는 위에 설명한 경로로 고정되어야 한다. (라즈베리파이 안에서 해당 스크립트의 위치를 찾으면 되기 때문이다.)</p><h2 id=참고-링크>참고 링크</h2><p>[1] boot 파티션 상세 설명(<a href=https://www.raspberrypi.org/documentation/configuration/boot_folder.md target=_blank rel="noopener noreffer">https://www.raspberrypi.org/documentation/configuration/boot_folder.md</a>)<br>[2] WiFi 설정을 위한 wpa_supplicant 설명(<a href=https://www.raspberrypi.org/documentation/configuration/wireless/headless.md target=_blank rel="noopener noreffer">https://www.raspberrypi.org/documentation/configuration/wireless/headless.md</a>)<br>[3] 라즈베리파이 제로의 USB OTG 모드 설정(<a href=https://gist.github.com/gbaman/50b6cca61dd1c3f88f41 target=_blank rel="noopener noreffer">https://gist.github.com/gbaman/50b6cca61dd1c3f88f41</a>)</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>수정: 2020-11-05</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%EB%A6%AC%EB%88%85%EC%8A%A4/>리눅스</a>,&nbsp;<a href=/tags/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/>네트워크</a>,&nbsp;<a href=/tags/headless/>headless</a>,&nbsp;<a href=/tags/wpa_supplicant/>wpa_supplicant</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>뒤로</a></span>&nbsp;|&nbsp;<span><a href=/>홈</a></span></section></div><div class=post-nav><a href=/posts/rpi/flash-rpi-os-into-sd/ class=prev rel=prev title="라즈베리파이 OS 설치하기"><i class="fas fa-angle-left fa-fw"></i>라즈베리파이 OS 설치하기</a>
<a href=/posts/review/book-joel-on-software/ class=next rel=next title="[책 리뷰] 조엘 온 소프트웨어">[책 리뷰] 조엘 온 소프트웨어<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.79.0">Hugo</a>로 제작된 사이트 | 테마 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="맨 위로"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="댓글 보기"><i class="fas fa-comment fa-fw"></i></a></div><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"복사하기","maxShownLines":10},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"","lightTheme":"github-light","repo":"jsyoo5b/blog"}}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-93278071-1',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-93278071-1" async></script></body></html>